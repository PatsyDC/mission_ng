<form [formGroup]="fromP" (ngSubmit)="save()" class="max-w-3xl mx-auto space-y-6 p-6 bg-white rounded-lg shadow-lg sm:px-4 md:px-6 lg:px-8 overflow-y-auto h-auto sm:h-[calc(100vh-4rem)]">
  <!-- Título -->
  <div class="text-center">
    <h3 class="text-2xl font-light text-gray-800 sm:text-xl">Editar Presentación</h3>
  </div>

  <!-- Descripción -->
  <div class="mb-6">
    <label for="description" class="block text-base font-medium text-gray-700">Descripción</label>
    <textarea
      id="description"
      rows="4"
      formControlName="description"
      class="mt-3 p-4 w-full text-base bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"
      placeholder="Ingresa la descripción"></textarea>
  </div>

  <!-- Imagen Antes -->
  <div class="mb-6">
    <label for="image_before" class="block text-base font-medium text-gray-700">Imagen Antes</label>

    <div class="flex space-x-4">
      <input
        class="mt-3 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50"
        (change)="onFileSelected($event, 'image_before')"
        id="image_before"
        type="file"
        accept="image/*"
      />
      <button type="button" (click)="takePhoto('image_before')" class="mt-3 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg">
        Tomar Foto
      </button>
    </div>

    <!-- Vista previa -->
    <div class="preview mt-3">
      <img *ngIf="imagePreviewBefore" [src]="imagePreviewBefore" alt="Vista previa - Imagen Antes" class="w-full h-auto rounded-md border" />
    </div>
  </div>

  <!-- Imagen Después -->
  <div class="mb-6">
    <label for="image_after" class="block text-base font-medium text-gray-700">Imagen Después</label>

    <div class="flex space-x-4">
      <input
        class="mt-3 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50"
        (change)="onFileSelected($event, 'image_after')"
        id="image_after"
        type="file"
        accept="image/*"
      />
      <button type="button" (click)="takePhoto('image_after')" class="mt-3 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg">
        Tomar Foto
      </button>
    </div>

    <!-- Vista previa -->
    <div class="preview mt-3">
      <img *ngIf="imagePreviewAfter" [src]="imagePreviewAfter" alt="Vista previa - Imagen Después" class="w-full h-auto rounded-md border" />
    </div>
  </div>

  <!-- Modal de la Cámara -->
  <div *ngIf="showWebcam" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg p-4 w-96">
      <webcam
        [trigger]="triggerObservable"
        (imageCapture)="handleImage($event)"
        [allowCameraSwitch]="allowCameraSwitch"
        (initError)="handleInitError($event)"
      ></webcam>
      <div class="flex justify-between mt-4">
        <button (click)="showWebcam = false" class="px-4 py-2 bg-gray-500 text-white rounded">Cerrar</button>
        <button (click)="triggerSnapshot()" class="px-4 py-2 bg-blue-600 text-white rounded">Capturar</button>
      </div>
    </div>
  </div>

  <!-- Fecha -->
  <div class="mb-6">
    <label for="fecha" class="block text-base font-medium text-gray-700">Fecha</label>
    <input
      id="fecha"
      type="date"
      formControlName="fecha"
      class="mt-3 p-4 w-full text-base bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"
    />
  </div>

  <!-- Botón de Submit -->
  <div class="text-center">
    <button
      type="submit"
      class="w-full sm:w-48 py-4 text-lg font-light text-white rounded-lg bg-gradient-to-r from-cyan-400 to-cyan-600 hover:from-cyan-500 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500"
      [disabled]="!isFormValid()">
      Guardar cambios
    </button>
  </div>
</form>
